{% extends "base.html" %}

{% block content %}
<h2>ğŸ“œ Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ²</h2>

{% if orders %}
    <ul class="list-group">
        {% for order in orders %}
        <li class="list-group-item">
            <strong>Ğ—Ğ°ĞºĞ°Ğ· #{{ order.id }}</strong> â€” {{ order.get_status_display }} ({{ order.created_at|date:"d.m.Y H:i" }})
            <br>ğŸ“ ĞĞ´Ñ€ĞµÑ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸: {{ order.address }}
            <br>ğŸ’ <em>
                {% for item in order.items.all %}
                    {{ item.flower.name }} x {{ item.quantity }} ({{ item.price }} â‚½ Ğ·Ğ° ÑˆÑ‚.) = {{ item.subtotal }} â‚½
                    {% if not forloop.last %}<br>{% endif %}
                {% endfor %}
            </em>
            <br>ğŸ’µ ĞĞ±Ñ‰Ğ°Ñ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ: {{ order.total_price }} â‚½
            <br>
            <a href="{% url 'repeat_order' order.id %}" class="btn btn-primary btn-sm">ğŸ”„ ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ·</a>
            {% if order.status in "awaiting_payment,pending,processing" %}
                <a href="{% url 'cancel_order' order.id %}" class="btn btn-danger btn-sm" 
                   onclick="return confirm('Ğ’Ñ‹ ÑƒĞ²ĞµÑ€ĞµĞ½Ñ‹, Ñ‡Ñ‚Ğ¾ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ¾Ñ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ·Ğ°ĞºĞ°Ğ· #{{ order.id }}?');">âŒ ĞÑ‚Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ</a>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
{% else %}
    <p>ğŸ˜• Ğ£ Ğ²Ğ°Ñ Ğ¿Ğ¾ĞºĞ° Ğ½ĞµÑ‚ Ğ·Ğ°ĞºĞ°Ğ·Ğ¾Ğ².</p>
{% endif %}

{% endblock %}